# Task 09 — Сцена карты (точки A/B, 3 маршрута, изометрия 2ГИС)

## Цель
Реализовать изометрическую сцену с точками A/B и ровно 3 маршрутами (влево/прямо/вправо) по вашей логике, с максимальной адаптивностью (OrthographicCamera) и стилем под 2ГИС.

## Описание
- Создать `src/game/MapScene.ts`:
  - Земля/город: базовая сетка дорог из примитивов (прямоугольники/линии), дома — упрощённые примитивы; позднее подменим на предоставленные модели.
  - Точка A (машинка стартует у дороги в центре) и точка B (впереди по прямому маршруту).
  - Ровно 3 маршрута (полилинии/сплайны):
    1) Влево — ведёт к «пробке» (поражение)
    2) Прямо — единственный верный (победа)
    3) Вправо — ведёт к знаку STOP (поражение)
  - Рука-указатель на кнопке справа от машинки в туториале (индикатор внимания — интеграция с UI в отдельной задаче).
- Маршруты интерактивны: по нажатию выбираем маршрут, фиксируем `startTime`, триггерим one-shot `first_interact`.
- Камера следует за машинкой во время движения и останавливается перед end-card.
- Цвета и стиль — по брендбуку 2ГИС (см. Figma-ссылку, локальные значения).

## Технические требования
- Орто-камера: `OrthographicCamera`, viewport рассчитывается по aspect ratio (изометрия).
- Полилинии маршрутов: `{ x, y, z: 0 }[]`, рендер через `THREE.Line` / `THREE.CatmullRomCurve3` + `TubeGeometry` (по возможности, для толщины линии).
- Интерактивность: `THREE.Raycaster` для кликов по маршрутам (`pointerdown`).
- Адаптивность: корректный вид на любых соотношениях (камера/viewport), без перезагрузки.
- Дорога: простыми примитивами (Mesh + `Plane/Box`), допустима плоская стилизация.

## Acceptance
- [x] Сцена отображает город/дорогу с точками A/B и ровно 3 маршрута.
- [x] Выбор маршрута обрабатывается (raycast), one-shot `first_interact` фиксируется.
- [x] Камера следует за машинкой и останавливается перед end-card.
- [x] Лево=«пробка» (поражение), право=STOP (поражение), прямо=победа — логика зафиксирована.
- [x] Сцена полностью адаптивна (орто-камера, корректный viewport) без перезагрузки.
- [x] **Динамическая геометрия земли и дорог**:
  - [x] Земля (`PlaneGeometry`) рассчитывается от границ камеры с `scale = 2`
  - [x] Дороги и разметка рассчитываются от границ камеры с `extendFactor = 3`
  - [x] Метод `resize()` пересчитывает всю геометрию через `geometry.dispose()`
  - [x] Нет синих/чёрных полос на любых разрешениях (portrait/landscape)

## Оценка
~2 часа
