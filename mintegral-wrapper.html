<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0066FF">
  
  <title>2–ì–ò–° ‚Äî –ù–∞–π–¥–∏ —Å–≤–æ–π –º–∞—Ä—à—Ä—É—Ç</title>
  
  <!-- ========== MINTEGRAL SDK INTEGRATION ========== -->
  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Mintegral SDK
    // –û–Ω–∏ –î–û–õ–ñ–ù–´ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –î–û –∑–∞–≥—Ä—É–∑–∫–∏ playable
    
    console.log('[Mintegral] SDK Integration loaded');
    
    // 1. window.install() - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ CTA
    window.install = function() {
      console.log('[Mintegral] ‚úÖ install() called - redirecting to store');
      // Mintegral —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç, –º—ã –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º
    };
    
    // 2. window.gameEnd() - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–±–µ–¥–µ/–ø–æ—Ä–∞–∂–µ–Ω–∏–∏
    window.gameEnd = function() {
      console.log('[Mintegral] üèÅ gameEnd() called');
    };
    
    // 3. window.gameReady() - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
    window.gameReady = function() {
      console.log('[Mintegral] ‚úÖ gameReady() called');
    };
    
    // 4. window.gameStart() - Mintegral –≤—ã–∑–æ–≤–µ—Ç —Å–∞–º –≤ –Ω–∞—á–∞–ª–µ playable
    window.gameStart = function() {
      console.log('[Mintegral] ‚ñ∂Ô∏è gameStart() called by Mintegral');
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É, —Ç–∞–π–º–µ—Ä –∏ —Ç.–¥.
      if (window.__playableCallbacks && window.__playableCallbacks.onGameStart) {
        window.__playableCallbacks.onGameStart();
      }
    };
    
    // 5. window.gameRetry() - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ retry
    window.gameRetry = function() {
      console.log('[Mintegral] üîÑ gameRetry() called');
    };
    
    // 6. window.gameClose() - Mintegral –≤—ã–∑–æ–≤–µ—Ç —Å–∞–º –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
    window.gameClose = function() {
      console.log('[Mintegral] ‚ùå gameClose() called by Mintegral');
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É –∏ —Ç.–¥.
      if (window.__playableCallbacks && window.__playableCallbacks.onGameClose) {
        window.__playableCallbacks.onGameClose();
      }
    };
    
    // –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è callback'–æ–≤ –∏–∑ playable
    window.__playableCallbacks = {};
    
    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π MRAID –º–æ–∫ –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
    // –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è @smoud/playable-sdk
    if (typeof window.mraid === 'undefined') {
      window.mraid = {
        getState: function() { return 'default'; },
        isViewable: function() { return true; },
        addEventListener: function(event, listener) { 
          console.log('[MRAID Mock] addEventListener:', event);
        },
        removeEventListener: function(event, listener) {},
        open: function(url) { 
          console.log('[MRAID Mock] open:', url);
          // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
          if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            window.open(url, '_blank');
          }
        },
        close: function() { console.log('[MRAID Mock] close'); },
        useCustomClose: function(value) {},
        getVersion: function() { return '3.0'; },
        getPlacementType: function() { return 'interstitial'; },
        expand: function() {},
        getExpandProperties: function() { return {}; },
        setExpandProperties: function() {},
        supports: function() { return false; }
      };
      console.log('[MRAID Mock] Created for local testing');
    }
  </script>
  
  <!-- UI —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="/src/ui/styles.css">
  
  <style>
    /* –ë–∞–∑–æ–≤—ã–µ reset –∏ safe-area */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      /* –§–∏–∫—Å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: 100vh —Å —É—á—ë—Ç–æ–º –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ */
      min-height: 100vh;
      min-height: -webkit-fill-available;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: #1a1a1a;
      color: #ffffff;
      /* Safe area —É–±—Ä–∞–Ω–æ —Å body, –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ UI-—ç–ª–µ–º–µ–Ω—Ç–∞–º */
    }
    
    html {
      height: -webkit-fill-available;
    }

    #app {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    /* Canvas –¥–ª—è Three.js */
    #game-canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      height: 100dvh; /* Dynamic viewport height –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
      position: fixed;
      top: 0;
      left: 0;
      margin: 0;
      padding: 0;
    }

  </style>
</head>
<body>
  <div id="app">
    <!-- Canvas –¥–ª—è Three.js —Ä–µ–Ω–¥–µ—Ä–∞ -->
    <canvas id="game-canvas"></canvas>

    <!-- UI —ç–ª–µ–º–µ–Ω—Ç—ã (HUD, —Ç—É—Ç–æ—Ä–∏–∞–ª, —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω) –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>

